<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src\core.js - DreamJs</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.8.0&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.8.0&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title="DreamJs"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.0.8</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/dream.dynamic.Action.html">dream.dynamic.Action</a></li>
            
                <li><a href="..&#x2F;classes/dream.dynamic.Animation.html">dream.dynamic.Animation</a></li>
            
                <li><a href="..&#x2F;classes/dream.dynamic.Dynamic.html">dream.dynamic.Dynamic</a></li>
            
                <li><a href="..&#x2F;classes/dream.dynamic.Tween.html">dream.dynamic.Tween</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/dynamic.html">dynamic</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src\core.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
(function(){
&#x2F;**
 * 
 * @param base
 *&#x2F;
Function.prototype.inherits = function(base){
	&#x2F;&#x2F;var b = function(){};
	&#x2F;&#x2F;b.prototype = base.prototype;
	this.prototype = new base;
	this._superClass = base;
	this.prototype.constructor = this;
	return this;
};

})();

window.URL = window.URL || window.webkitURL;
if(window.performance) window.performance.now = window.performance.now || window.performance.webkitNow();

&#x2F;**
 * @namespace This is DreamJS root package.
 *&#x2F;
if(!window.dream) dream = {};

dream.fc = 0;

dream.DEBUG = false;

dream.hiwc = 0;
&#x2F;**
 * @constructor
 *&#x2F;
dream.Asset = function(){	
	this.requiredResources = [];
};

dream.Asset.prototype.destroy = function(){
	
};

&#x2F;**
 * @constructor
 *&#x2F;
dream.VisualAsset = function(){
	
}.inherits(dream.Asset);

dream.event.createWithCapture(dream.VisualAsset.prototype, &quot;onMouseEnter&quot;);
dream.event.createWithCapture(dream.VisualAsset.prototype, &quot;onMouseLeave&quot;);
dream.event.createWithCapture(dream.VisualAsset.prototype, &quot;onMouseMove&quot;);
dream.event.createWithCapture(dream.VisualAsset.prototype, &quot;onMouseDown&quot;);
dream.event.createWithCapture(dream.VisualAsset.prototype, &quot;onMouseUp&quot;);
dream.event.createWithCapture(dream.VisualAsset.prototype, &quot;onClick&quot;);
dream.event.createWithCapture(dream.VisualAsset.prototype, &quot;onDrag&quot;);
dream.event.createWithCapture(dream.VisualAsset.prototype, &quot;onDragStart&quot;);
dream.event.createWithCapture(dream.VisualAsset.prototype, &quot;onDragStop&quot;);
dream.event.createWithCapture(dream.VisualAsset.prototype, &quot;onDrop&quot;);

dream.VisualAsset.prototype.raiseMouseDown = function(event){
	dream.event.dispatch(this, &quot;onMouseDown$capture&quot;, event);
	if(event._isPropagationStopped) return false;
	if(this.hovered) {
		this.hovered.raiseMouseDown(event.toLocal(this.hovered));
		if(event._isPropagationStopped) return false;
		event.restore();
	}
	dream.event.dispatch(this, &quot;onMouseDown&quot;, event);
	this.isMouseDown = true;
};

dream.VisualAsset.prototype.raiseMouseUp = function(event, clickEvent, dropEvent){
	if(event._isPropagationStopped &amp;&amp; clickEvent._isPropagationStopped) return false;
	
	if(!event._isPropagationStopped) dream.event.dispatch(this, &quot;onMouseUp$capture&quot;, event);
	if(this.isMouseDown &amp;&amp; !clickEvent._isPropagationStopped) dream.event.dispatch(this, &quot;onClick$capture&quot;, event);
	
	if(dropEvent &amp;&amp; !dropEvent._isPropagationStopped) dream.event.dispatch(this, &quot;onDrop$capture&quot;, dropEvent);
	
	if(this.hovered){
		this.hovered.raiseMouseUp(event.toLocal(this.hovered), clickEvent.toLocal(this.hovered), dropEvent &amp;&amp; dropEvent.toLocal(this.hovered));
		event.restore();
		clickEvent.restore();
	}
	
	if(dropEvent &amp;&amp; !dropEvent._isPropagationStopped) dream.event.dispatch(this, &quot;onDrop&quot;, dropEvent);
	
	if(!event._isPropagationStopped) dream.event.dispatch(this, &quot;onMouseUp&quot;, event);
	if(this.isMouseDown &amp;&amp; !clickEvent._isPropagationStopped){
		dream.event.dispatch(this, &quot;onClick&quot;, event);
		this.isMouseDown = false;
	}
};

dream.VisualAsset.prototype.raiseMouseMove = function(event, dragEvent){
	dream.event.dispatch(this, &quot;onMouseMove$capture&quot;, event);
	
	if(this.isMouseDown &amp;&amp; !this.isDragging)
		dream.event.dispatch(this, &quot;onDragStart$capture&quot;, dragEvent);

	if(this.hovered){
		this.hovered.raiseMouseMove(event.toLocal(this.hovered), dragEvent.toLocal(this.hovered));
		event.restore();
		dragEvent.restore();
	}
	
	if(!event._isPropagationStopped) dream.event.dispatch(this, &quot;onMouseMove&quot;, event);
	
	if(this.isMouseDown &amp;&amp; !this.isDragging){
		if(!dragEvent._isPropagationStopped) dream.event.dispatch(this, &quot;onDragStart&quot;, event);
		if(!dragEvent._isDefaultPrevented){
			this.isDragging = true;
			if(this.hovered) this.dragging = this.hovered;		
		}
	}
};

dream.VisualAsset.prototype.raiseMouseLeave = function(event){
	if(this.hovered) this.hovered.raiseMouseLeave(event.toLocal(this.hovered)), event.restore();
	this.isHovered = false;
	this.hovered = null;	
	dream.event.dispatch(this, &quot;onMouseLeave&quot;, event);
};

dream.VisualAsset.prototype.raiseDrag = function(event){
	dream.event.dispatch(this, &quot;onDrag$capture&quot;, event);
	if(!event._isPropagationStopped){
		if(this.dragging) this.dragging.raiseDrag(event.toLocal(this.dragging)), event.restore();
		if(!event._isPropagationStopped) dream.event.dispatch(this, &quot;onDrag&quot;, event);
	}
};

dream.VisualAsset.prototype.raiseDragStop = function(event){
	dream.event.dispatch(this, &quot;onDragStop$capture&quot;, event);
	if(this.dragging &amp;&amp; !event._isPropagationStopped) this.dragging.raiseDragStop(event.toLocal(this.dragging)), event.restore();
	this.dragging = false;
	this.isDragging = false;
	if(!event._isPropagationStopped) dream.event.dispatch(this, &quot;onDragStop&quot;, event);
};

&#x2F;**
 * @constructor
 *&#x2F;
dream.Point = function(left, top){
	this.left = left || 0;
	this.top = top || 0;
};

dream.event.create(dream.Point.prototype, &quot;onChange&quot;, function(){
	this._left = this.left;
	this._top = this.top;
	dream.util.createEventProperty(this, &quot;left&quot;);
	dream.util.createEventProperty(this, &quot;top&quot;);
});

dream.Point.prototype.toString = function(){return &quot;Point[&quot;+this.left+&quot;, &quot;+this.top+&quot;]&quot;;};

dream.Point.prototype.isIn = function(rect){
	return this.left &gt;= rect.left &amp;&amp; this.left &lt;= rect.right &amp;&amp; 
		this.top &gt;= rect.top &amp;&amp; this.top &lt;= rect.bottom;
};

dream.Point.prototype.clone = function(){
	return new dream.Point(this.left, this.top);
};

&#x2F;**
 * @constructor
 *&#x2F;
dream.Rect = function(left, top, width, height, transformation){
	this.width = width || 0;
	this.height = height || 0;
	
	this.left = left || 0;
	this.top = top || 0;
	
	this.transformation = transformation || new dream.transform.Identity;
};

Object.defineProperty(dream.Rect.prototype, &quot;right&quot;, {
	get : function () { return this.left + this.width;}
});

Object.defineProperty(dream.Rect.prototype, &quot;bottom&quot;, {
	get : function () { return this.top + this.height;}
});

Object.defineProperty(dream.Rect.prototype, &quot;boundary&quot;, {
	get : function () { 
		if(!this.transformation || this.transformation instanceof dream.transform.Identity){
			return this.clone();
		}else{
			var m = this.transformation.matrix;
			var l = this.left, r = this.right, t = this.top, b = this.bottom;
			var tps = [
			          m.multiplyByPoint(new dream.Point(l, t)),
			          m.multiplyByPoint(new dream.Point(r, t)),
			          m.multiplyByPoint(new dream.Point(l, b)),
			          m.multiplyByPoint(new dream.Point(r, b))
			          ];
			
			var tp = tps[0].clone();
			var tp1 = tps[0].clone();
			for ( var i = 0; i &lt; 4; i++) {
				if (tps[i].left &lt; tp.left)
					tp.left = tps[i].left;
				if (tps[i].left &gt; tp1.left)
					tp1.left = tps[i].left;
				if (tps[i].top &lt; tp.top)
					tp.top = tps[i].top;
				if (tps[i].top &gt; tp1.top)
					tp1.top = tps[i].top;
			}
			
			return new dream.Rect(tp.left, tp.top, tp1.left - tp.left, tp1.top - tp.top);
		}
	}
});

dream.Rect.prototype.hasIntersectWith = function(rect){
	return this.right &gt; rect.left &amp;&amp; 
		this.left &lt; rect.right &amp;&amp; 
		this.bottom &gt; rect.top &amp;&amp; 
		this.top &lt; rect.bottom;
};

dream.Rect.prototype.getIntersectWith = function(rect){
	if(this.hasIntersectWith(rect)){
		var l = Math.max(rect.left, this.left);
		var t = Math.max(rect.top, this.top);
		var r = Math.min(rect.right, this.right);
		var b = Math.min(rect.bottom, this.bottom);
		
		return new dream.Rect(l, t, r - l + 1, b - t + 1);
	}else{
		return false;
	}
};

dream.Rect.prototype.covers = function(rect){
	return this.left &lt;= rect.left &amp;&amp; this.right &gt;= rect.right &amp;&amp;
		this.top &lt;= rect.top &amp;&amp; this.bottom &gt;= rect.bottom;
};

dream.Rect.prototype.isEqualWith = function(rect){
	return this.left == rect.left &amp;&amp; this.width == rect.width &amp;&amp;
		this.top == rect.top &amp;&amp; this.height == rect.height;
};

dream.Rect.prototype.add = function(rect){
	var r = new dream.Rect(this.left&lt;rect.left?this.left:rect.left, this.top&lt;rect.top?this.top:rect.top);
	r.width = (this.right&gt;rect.right?this.right:rect.right) - r.left;
	r.height = (this.bottom&gt;rect.bottom?this.bottom:rect.bottom) - r.top;
	r.transformation = this.transformation;
	return r;
};

dream.Rect.prototype.clone = function(){
	return new dream.Rect(this.left, this.top, this.width, this.height);
};

dream.Rect.prototype.toString = function(){return &quot;Rect[&quot;+this.left+&quot;, &quot;+this.top+&quot;, &quot;+this.width+&quot;, &quot;+this.height+&quot;]&quot;;};



    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
